import{p as j,r as o,j as e}from"./index-DMyFwfPw.js";import{a as g}from"./index-BmJ0gaIa.js";import{a as i}from"./axios-upsvKRUO.js";import"./ClientFooter-BSyiqpfD.js";import{C as v,a as f,b as y,c as C}from"./CModalTitle-n6JZNKqm.js";import{c as b}from"./index.esm-C08VXAn-.js";import"./iconBase-DDq4M1RR.js";import"./CConditionalPortal-BL_iV0wb.js";const I=({visible:l,onClose:s,onAppointmentAdded:p})=>{const m=j(),[d,c]=o.useState([]),[n,h]=o.useState({patientId:"",department:"",appointmentDate:"",appointmentTime:"",notes:""});o.useEffect(()=>{(async()=>{try{const t=await i.get("http://localhost:5000/clinic/patients?page=1&limit=100");c(t.data.patients)}catch(t){console.error("Erreur lors de la récupération des patients :",t)}})()},[]);const r=a=>{const{name:t,value:x}=a.target;h({...n,[t]:x})},u=async a=>{a.preventDefault();try{const t=await i.post("http://localhost:5000/clinic/createBaseAppointment",n);console.log("Appointment added:",t.data),p(t.data.appointment),s(),m("/client/payment",{state:{appointment:t.data.appointment}})}catch(t){console.error("Error adding appointment:",t),alert("Failed to add appointment")}};return e.jsxs(v,{className:"newregistermodal ",alignment:"center",scrollable:!0,size:"lg",visible:l,onClose:s,"aria-labelledby":"VerticallyCenteredScrollableExample2",children:[e.jsx(f,{children:e.jsx(y,{id:"VerticallyCenteredScrollableExample2",className:"Titleformsmodal",children:"Register New Appointment"})}),e.jsx(C,{className:"p-5",children:e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"patientId",children:"Patient"}),e.jsxs("select",{name:"patientId",id:"patientId",value:n.patientId,onChange:r,required:!0,children:[e.jsx("option",{value:"",children:"Select Patient"}),d.map(a=>e.jsxs("option",{value:a._id,children:[a.name," "]},a._id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"department",children:"Department"}),e.jsxs("select",{name:"department",value:n.department,onChange:r,required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"ORL",children:"ORL"}),e.jsx("option",{value:"Cardiology",children:"Cardiology"}),e.jsx("option",{value:"Onthology",children:"Onthology"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"appointmentDate",children:"Date"}),e.jsx("input",{type:"date",name:"appointmentDate",value:n.appointmentDate,onChange:r,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"appointmentTime",children:"Time"}),e.jsx("input",{type:"time",name:"appointmentTime",value:n.appointmentTime,onChange:r,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"notes",children:"Notes"}),e.jsx("textarea",{name:"notes",value:n.notes,onChange:r})]}),e.jsx("div",{className:"savenewuser form-group d-flex justify-content-center",children:e.jsxs(b,{type:"submit",children:["Save Appointment   ",e.jsx(g,{})]})})]})})]})};export{I as default};
