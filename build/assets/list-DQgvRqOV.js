import{r as l,p as C,j as e}from"./index-DMyFwfPw.js";import{a as d}from"./axios-upsvKRUO.js";import{C as f}from"./CRow-Cq4HXHde.js";import{C as u}from"./CCol-OKn3_WcL.js";import{C as b}from"./CCard-BxMFv-c9.js";import{C as w}from"./CCardBody-W_evx8a4.js";import{c as n}from"./index.esm-C08VXAn-.js";import{C as y,a as E,b as p,c as o,d as T,e as t}from"./CTable-Cjt_XmP4.js";const R=()=>{const[c,i]=l.useState([]),a=C();l.useEffect(()=>{(async()=>{try{const r=await d.get("http://localhost:5000/api/subscriptions");i(r.data)}catch(r){console.error("Error fetching subscriptions:",r)}})()},[]);const h=s=>{a(`/admin/editplan/${s}`)},m=s=>{window.confirm("Êtes-vous sûr de vouloir supprimer cet abonnement ?")&&x(s)},x=async s=>{try{(await d.delete(`http://localhost:5000/api/deletesubscriptions/${s}`)).status===200?i(c.filter(j=>j._id!==s)):console.error("Erreur lors de la suppression de l'abonnement")}catch(r){console.error("Erreur lors de la suppression de l'abonnement:",r)}};return e.jsx(f,{children:e.jsx(u,{xs:12,children:e.jsx(b,{className:"mb-4",children:e.jsxs(w,{children:[e.jsx("div",{className:"d-flex justify-content-between mb-3",children:e.jsx(n,{color:"primary",onClick:()=>a("/admin/addplan"),children:"Ajouter Plan"})}),e.jsxs(y,{striped:!0,bordered:!0,children:[e.jsx(E,{children:e.jsxs(p,{children:[e.jsx(o,{scope:"col",children:"Name"}),e.jsx(o,{scope:"col",children:"Duration"}),e.jsx(o,{scope:"col",children:"Price"}),e.jsx(o,{scope:"col",children:"Description"}),e.jsx(o,{scope:"col",children:"Actions"})]})}),e.jsx(T,{children:c.map(s=>e.jsxs(p,{children:[e.jsx(o,{scope:"row",children:s.name}),e.jsx(t,{children:s.duration}),e.jsx(t,{children:s.price}),e.jsx(t,{children:s.description}),e.jsxs(t,{children:[e.jsx(n,{color:"info",style:{color:"white"},onClick:()=>h(s._id),children:"Edit"}),e.jsx(n,{color:"danger",style:{color:"white"},className:"ms-2",onClick:()=>m(s._id),children:"Delete"})]})]},s._id))})]})]})})})})};export{R as default};
